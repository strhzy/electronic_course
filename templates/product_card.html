<div class="card shadow h-100 product-card">
    {% if product.photo %}
        <img src="{{ product.photo.url }}" class="card-img-top product-card-image" alt="{{ product.name }}">
    {% else %}
        <div class="card-img-top product-card-image bg-secondary d-flex align-items-center justify-content-center">
            <span class="text-muted">Нет фото</span>
        </div>
    {% endif %}
    <div class="card-body d-flex flex-column">
        <h5 class="card-title">{{ product.name }}</h5>
        <p class="card-text text-muted flex-grow-1">{{ product.description|truncatewords:10|default:"Нет описания" }}</p>
        <div class="mt-auto">
            <p class="card-text fw-bold text-accent mb-2">{{ product.price }} ₽</p>
            <div class="d-grid gap-2">
                <a class="btn btn-primary" href="{% url 'about' product.id %}">О товаре</a>
                {% if request.user.is_authenticated %}
                    <form method="post" action="{% url 'cart_add' product.id %}" class="mb-0">
                        {% csrf_token %}
                        <div class="mb-2">
                            {{ form_cart }}
                        </div>
                        <button type="submit" class="btn btn-success w-100">Добавить в корзину</button>
                    </form>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<style>
.product-card {
    background-color: rgba(45, 42, 50, 0.95);
    border: 1px solid var(--secondary-color);
    color: var(--text-color);
    backdrop-filter: blur(10px);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

.product-card-image {
    height: 250px;
    object-fit: cover;
    width: 100%;
}

.btn-primary {
    background-color: var(--accent-color);
    border-color: var(--accent-color);
}

.btn-primary:hover {
    background-color: var(--secondary-color);
    border-color: var(--secondary-color);
}

.btn-success {
    background-color: #198754;
    border-color: #198754;
}

.btn-success:hover {
    background-color: #157347;
    border-color: #146c43;
}

.text-accent {
    color: var(--accent-color) !important;
}

.text-muted {
    color: var(--light-color) !important;
}

.form-control {
    background-color: var(--dark-bg);
    border: 1px solid var(--secondary-color);
    color: var(--text-color);
}

.form-control:focus {
    background-color: var(--dark-bg);
    border-color: var(--accent-color);
    color: var(--text-color);
    box-shadow: 0 0 0 0.25rem rgba(138, 107, 140, 0.25);
}
</style>