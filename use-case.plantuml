@startuml
left to right direction

actor "Неавторизованный пользователь" as guest
actor Покупатель as customer
actor Менеджер as manager
actor Администратор as admin

' === Общие прецеденты ===
usecase "Авторизоваться" as UC_Login
usecase "Просматривать каталог товаров" as UC_BrowseCatalog

' === Для гостей ===
usecase "Зарегистрироваться" as UC_Register
usecase "Восстановить пароль" as UC_RecoverPassword

' === Покупатель ===
usecase "Оформить заказ" as UC_PlaceOrder
usecase "Добавить товар в корзину" as UC_AddToCart
usecase "Управлять корзиной" as UC_ManageCart
usecase "Просматривать свои заказы" as UC_ViewOwnOrders
usecase "Редактировать профиль" as UC_EditProfile
usecase "Сменить пароль" as UC_ChangePassword

' === Менеджер ===
usecase "Управлять заказами" as UC_ManageOrders
usecase "Управлять товарами" as UC_ManageProducts
usecase "Управлять категориями" as UC_ManageCategories

' === Администратор ===
' --- Категории ---
usecase "Создать категорию" as UC_CreateCategory
usecase "Редактировать категорию" as UC_EditCategory
usecase "Удалить категорию" as UC_DeleteCategory

' --- Производители ---
usecase "Создать производителя" as UC_CreateManufacturer
usecase "Редактировать производителя" as UC_EditManufacturer
usecase "Удалить производителя" as UC_DeleteManufacturer

' --- Товары ---
usecase "Создать товар" as UC_CreateProduct
usecase "Редактировать товар" as UC_EditProduct
usecase "Удалить товар" as UC_DeleteProduct

' --- Клиенты ---
usecase "Просматривать клиентов" as UC_ViewCustomers
usecase "Редактировать клиента" as UC_EditCustomer
usecase "Удалять клиента" as UC_DeleteCustomer

' --- Отзывы ---
usecase "Просматривать отзывы" as UC_ViewReviews
usecase "Редактировать отзыв" as UC_EditReview
usecase "Удалять отзыв" as UC_DeleteReview

' --- Заказы (расширенное управление) ---
usecase "Создать заказ" as UC_CreateOrder
usecase "Редактировать заказ" as UC_EditOrder
usecase "Удалять заказ" as UC_DeleteOrder

' --- Сотрудники ---
usecase "Создать сотрудника" as UC_CreateEmployee
usecase "Редактировать сотрудника" as UC_EditEmployee
usecase "Удалять сотрудника" as UC_DeleteEmployee

' --- Прочие административные функции ---
usecase "Блокировать/разблокировать пользователей" as UC_BlockUser
usecase "Назначать роли пользователям" as UC_AssignRole
usecase "Создавать резервную копию БД" as UC_BackupDB
usecase "Восстанавливать БД из резервной копии" as UC_RestoreDB
usecase "Экспортировать данные (CSV/SQL)" as UC_ExportData

' === Зависимости ===
UC_Register ..> UC_Login : <<include>>
UC_PlaceOrder ..> UC_AddToCart : <<include>>
UC_PlaceOrder ..> UC_BrowseCatalog : <<include>>
UC_ManageCart ..> UC_BrowseCatalog : <<include>>
UC_ViewOwnOrders ..> UC_Login : <<include>>
UC_EditProfile ..> UC_Login : <<include>>
UC_ChangePassword ..> UC_Login : <<include>>
UC_RecoverPassword ..> UC_Login : <<extend>>
UC_ManageOrders ..> UC_BrowseCatalog : <<include>>
UC_ManageProducts ..> UC_BrowseCatalog : <<include>>

' === Связи актёров и прецедентов ===
guest --> UC_BrowseCatalog
guest --> UC_Register
guest --> UC_Login

customer --> UC_Login
customer --> UC_PlaceOrder
customer --> UC_AddToCart
customer --> UC_ManageCart
customer --> UC_ViewOwnOrders
customer --> UC_EditProfile
customer --> UC_ChangePassword
customer --> UC_RecoverPassword

manager --> UC_Login
manager --> UC_ManageOrders
manager --> UC_ManageProducts
manager --> UC_ManageCategories

admin --> UC_Login
' Категории
admin --> UC_CreateCategory
admin --> UC_EditCategory
admin --> UC_DeleteCategory
' Производители
admin --> UC_CreateManufacturer
admin --> UC_EditManufacturer
admin --> UC_DeleteManufacturer
' Товары
admin --> UC_CreateProduct
admin --> UC_EditProduct
admin --> UC_DeleteProduct
' Клиенты
admin --> UC_ViewCustomers
admin --> UC_EditCustomer
admin --> UC_DeleteCustomer
' Отзывы
admin --> UC_ViewReviews
admin --> UC_EditReview
admin --> UC_DeleteReview
' Заказы
admin --> UC_CreateOrder
admin --> UC_EditOrder
admin --> UC_DeleteOrder
' Сотрудники
admin --> UC_CreateEmployee
admin --> UC_EditEmployee
admin --> UC_DeleteEmployee
' Управление пользователями
admin --> UC_BlockUser
admin --> UC_AssignRole
' Системные задачи
admin --> UC_BackupDB
admin --> UC_RestoreDB
admin --> UC_ExportData

@enduml